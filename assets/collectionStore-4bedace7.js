import{k as r,a as n,l as a}from"./index-edab9d34.js";import{s as d}from"./swalMessage-4e4cdec7.js";import{l as u}from"./cartStore-b1225af4.js";const{VITE_APP_URL:c,VITE_APP_PATH:l}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},i=u(),L=r("products",{state:()=>({products:[],tempProduct:{},page:{},productCategory:{披薩:["蔬食首選","海鮮至上","無肉不歡","甜食主義"],副食:["炸物","飲料"]},filterCategory:"全部商品",keyWords:""}),actions:{...n(d,["swalShow"]),getProducts(t=1,e="全部商品"){let s=`${c}/api/${l}/products/all`;e==="全部商品"&&(s=`${c}/api/${l}/products/?page=${t}`),i.isLoading=!0,a.get(s).then(o=>{this.products=o.data.products,this.page=o.data.pagination,this.filterCategory=e,i.isLoading=!1}).catch(o=>{this.swalShow(`${o.message}`,"error"),i.isLoading=!1})},getProduct(t){i.isLoading=!0,this.tempProduct={},a.get(`${c}/api/${l}/product/${t}`).then(e=>{this.tempProduct=e.data.product,i.isLoading=!1}).catch(e=>{this.swalShow(`${e.message}`,"error"),i.isLoading=!1})},changeCategory(t){this.getProducts(1,t)},searchItem(t){this.keyWords=t}},getters:{filterProducts:({products:t,filterCategory:e})=>t.filter(o=>e==="全部商品"?t:o.productCategory===e),searchProducts:({products:t,keyWords:e})=>t.filter(o=>(o.productCategory.includes(e)||o.title.includes(e)||o.category.includes(e))&&e!=="")}}),{VITE_APP_URL:h,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},_=r("collectionStore",{state:()=>({collectionList:[],collection:{itemID:"",hover:!1},filterProducts:[]}),actions:{...n(d,["swalShow"]),getFilterProducts(){const t=`${h}/api/${g}/products/all`;a.get(t).then(e=>{this.filterProducts=e.data.products.filter(s=>this.collectionList.indexOf(s.id)!==-1)}).catch(e=>{this.swalShow(`${e.message}`,"error")})},getCollection(){localStorage.getItem("collectionList")?(this.collectionList=JSON.parse(localStorage.getItem("collectionList")),this.getFilterProducts()):this.collectionList=[]},updateCollection(t){const e=this.collectionList.indexOf(t.id);this.getCollection(),e===-1?this.addToCollection(t.id):this.deleteCollectionItem(e),localStorage.setItem("collectionList",JSON.stringify(this.collectionList)),this.getCollection()},addToCollection(t){this.collectionList.push(t),this.swalShow("已加入收藏","success","toast")},deleteCollectionItem(t){this.collectionList.splice(t,1),this.swalShow("已取消收藏","success","toast")}}});export{_ as c,L as p};
