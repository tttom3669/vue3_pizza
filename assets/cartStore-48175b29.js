import{k as c,m as n,l as o}from"./index-8f22bd37.js";import{s as l}from"./swalMessage-1e206958.js";const h=c("loadingStore",{state:()=>({isLoading:!1,loadingItem:""})}),{VITE_APP_URL:i,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},a=h(),p=c("cart",{state:()=>({cart:{}}),actions:{...n(l,["swalShow"]),getCart(){a.isLoading=!0,o.get(`${i}/api/${r}/cart`).then(t=>{this.cart=t.data.data,a.isLoading=!1}).catch(t=>{this.swalShow(`${t.response.data.message}`,"error")})},addToCart(t,s=1){a.loadingItem=t;const d={product_id:t,qty:s};o.post(`${i}/api/${r}/cart`,{data:d}).then(e=>{this.swalShow(`${e.data.message}`,"success","toast"),a.loadingItem="",this.getCart()}).catch(e=>{this.swalShow(`${e.response.data.message}`,"error"),a.loadingItem=""})},updateCartItem(t,s){const d={product_id:t.product.id,qty:s};a.loadingItem=t.id,o.put(`${i}/api/${r}/cart/${t.id}`,{data:d}).then(e=>{this.swalShow(`${e.data.message}`,"success","toast"),this.getCart(),a.loadingItem=""}).catch(e=>{this.swalShow(`${e.response.data.message}`,"error"),a.loadingItem=""})},deleteCartItem(t){a.loadingItem=t.id,o.delete(`${i}/api/${r}/cart/${t.id}`).then(s=>{this.swalShow(`購物車${s.data.message}`,"success","toast"),this.getCart(),a.loadingItem=""}).catch(s=>{this.swalShow(`${s.response.data.message}`,"error"),a.loadingItem=""})},deleteCart(){a.loadingItem="deleteCart",o.delete(`${i}/api/${r}/carts`).then(()=>{this.swalShow("已清空購物車","success","toast"),this.getCart(),a.loadingItem=""}).catch(t=>{this.swalShow(`${t.response.data.message}`,"error"),a.loadingItem=""})}}});export{p as c,h as l};
