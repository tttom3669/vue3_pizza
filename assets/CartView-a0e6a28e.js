import{_ as I,R as q,m as f,a as V,r as l,o as s,c as n,b as t,d,w as u,F as y,e as L,h as a,g,f as x,t as i,k as $,i as D,H as N}from"./index-6d45ff7a.js";import{c as w,l as j}from"./cartStore-c6c9b62c.js";import{P as F}from"./ProgressBar-0c46b6fe.js";import{F as S}from"./FrontHeading-a5c75b63.js";import"./swalMessage-4aea2b24.js";const T={data(){return{}},components:{ProgressBar:F,FrontHeading:S,RouterLink:q},computed:{...f(w,["cart"]),...f(j,["isLoading","loadingItem"])},methods:{...V(w,["getCart","updateCartItem","deleteCartItem","deleteCart"])},mounted(){this.getCart()}},H={class:"bg_texture3",style:{"min-height":"600px"}},P={class:"container"},R={key:0,class:"d-flex flex-column justify-content-center align-items-center",style:{"margin-top":"100px"}},U=t("div",{class:"text-center my-5 fw-bold text-cusBrown fs-4"},[t("i",{class:"bi bi-cart-x"}),x(" 您的購物車目前是空的喔 ")],-1),M={class:"w-100 text-center"},A=t("button",{type:"button",class:"btn btn-cusDarkBrown text-white w-md-25 w-50"}," 返回購物 ",-1),E={key:1,class:"mt-4 mb-5"},z=$('<div class="row fw-bold text-cusDarkBrown text-center border-bottom py-2" style="background-color:#ffe3ce;"><div class="col-2"></div><div class="col-md-4 text-start text-md-center">商品明細</div><div class="col d-none d-md-block">數量/單位</div><div class="col d-none d-md-block">小計</div></div>',1),G={class:"col-2 col-md-1 order-3 order-md-1"},J=["onClick","disabled"],K=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),O=t("i",{class:"bi bi-trash3"},null,-1),Q=[K,O],W={class:"col-3 col-md-1 order-1 order-md-2"},X=["src","alt"],Y={class:"col-7 col-md-4 order-2 order-md-3"},Z={class:"d-flex flex-column text-nowrap"},tt={class:"text-cusDarkBrown fw-bold"},et={class:"text-cusBrown"},ot={class:"col order-4 my-3"},st={class:"input-group input-group-sm"},nt={class:"d-flex justify-content-center flex-nowrap w-100"},dt=["disabled","onClick"],at=t("i",{class:"bi bi-dash"},null,-1),it=[at],ct=["onUpdate:modelValue","onBlur"],rt=["disabled","onClick"],lt=t("i",{class:"bi bi-plus"},null,-1),ut=[lt],_t={class:"col text-end order-5"},pt={class:"row bg-white py-2"},bt={class:"col"},ht=["disabled"],mt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},vt={class:"col-md-2 col text-end text-cusDarkBrown fw-bold fs-5"},ft={class:"d-flex justify-content-between"},yt=t("div",null,"總計",-1),gt={key:2,class:"row justify-content-end flex-row gy-3 mb-3"},wt={class:"col-md-2 col-6"},xt=t("button",{type:"button",class:"btn btn-cusDarkBrown text-white w-100"}," 返回購物 ",-1),kt={class:"col-md-2 col-6"},Ct=t("button",{type:"button",class:"btn btn btn-primary w-100 text-white"}," 確認送出 ",-1);function Bt(o,c,It,qt,Vt,Lt){var _,p,b,h,m;const k=l("ProgressBar"),C=l("FrontHeading"),r=l("RouterLink"),B=l("VueLoading");return s(),n(y,null,[t("div",H,[t("div",P,[d(k,{stage:1,class:"mt-3"}),d(C,{title:"購物車",class:"mt-3"}),((_=o.cart.carts)==null?void 0:_.length)===0?(s(),n("div",R,[U,t("div",M,[d(r,{class:"text-decoration-none text-white",to:"/products"},{default:u(()=>[A]),_:1})])])):(s(),n("div",E,[z,(s(!0),n(y,null,L(o.cart.carts,e=>(s(),n("div",{class:"row justify-content-center bg-white border-bottom align-items-center text-cusDarkBrown text-center py-2",key:e.id},[t("div",G,[t("div",{type:"button",class:"text-center clickBtn",onClick:a(v=>o.deleteCartItem(e),["prevent"]),disabled:o.loadingItem===e.id},Q,8,J)]),t("div",W,[d(r,{to:`/product/${e.product.id}`},{default:u(()=>[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"object-fit-cover",height:"70",width:"70"},null,8,X)]),_:2},1032,["to"])]),t("div",Y,[t("div",Z,[t("div",tt,i(e.product.title),1),t("div",et," NT$ "+i(e.product.price)+" / "+i(e.product.unit),1)])]),t("div",ot,[t("div",st,[t("div",nt,[t("button",{type:"button",class:"btn btn-outline-primary",id:"basic-addon1",disabled:e.qty===1||o.loadingItem===e.id,onClick:a(()=>o.updateCartItem(e,e.qty-1),["prevent"])},it,8,dt),D(t("input",{type:"number",class:"form-control text-center hide-arrows mx-2",min:"1",max:"20","onUpdate:modelValue":v=>e.qty=v,oninput:"if(value<1)value=1; if(value>20) value=20;",onBlur:a(()=>{e.qty<1?e.qty=1:e.qty>20&&(e.qty=20),o.updateCartItem(e,e.qty)},["prevent"])},null,40,ct),[[N,e.qty]]),t("button",{type:"button",class:"btn btn-outline-primary",id:"basic-addon2",disabled:e.qty>=20||o.loadingItem===e.id,onClick:a(()=>o.updateCartItem(e,e.qty+1),["prevent"])},ut,8,rt)])])]),t("div",_t,"NT$ "+i(e.total),1)]))),128)),t("div",pt,[t("div",bt,[t("button",{class:"btn btn-outline-danger text-nowrap",type:"button",onClick:c[0]||(c[0]=a(()=>o.deleteCart(),["prevent"])),disabled:o.loadingItem==="deleteCart"||((b=(p=o.cart)==null?void 0:p.carts)==null?void 0:b.length)===0},[o.loadingItem==="deleteCart"?(s(),n("span",mt)):g("",!0),x(" 清空購物車 ")],8,ht)]),t("div",vt,[t("div",ft,[yt,t("div",null,"NT$ "+i(o.cart.total),1)])])])])),(m=(h=o.cart)==null?void 0:h.carts)!=null&&m.length?(s(),n("div",gt,[t("div",wt,[d(r,{class:"text-decoration-none text-white",to:"/products"},{default:u(()=>[xt]),_:1})]),t("div",kt,[d(r,{class:"text-decoration-none text-white",to:"/order"},{default:u(()=>[Ct]),_:1})])])):g("",!0)])]),d(B,{active:o.isLoading,"onUpdate:active":c[1]||(c[1]=e=>o.isLoading=e),loader:"dots"},null,8,["active"])],64)}const St=I(T,[["render",Bt]]);export{St as default};
