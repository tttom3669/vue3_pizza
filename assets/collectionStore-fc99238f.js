import{p as s,a as l,q as c}from"./index-56a9654d.js";import{s as a}from"./swalMessage-3d7964fb.js";import{l as n}from"./cartStore-1a749757.js";const{VITE_APP_URL:r,VITE_APP_PATH:h}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},e=n(),L=s("collectionStore",{state:()=>({collectionList:[],collection:{itemID:"",hover:!1},filterProducts:[]}),actions:{...l(a,["swalShow"]),getFilterProducts(){const t=`${r}/api/${h}/products/all`;e.isLoading=!0,c.get(t).then(o=>{this.filterProducts=o.data.products.filter(i=>this.collectionList.indexOf(i.id)!==-1),e.isLoading=!1}).catch(o=>{this.swalShow(`${o.message}`,"error"),e.isLoading=!1})},getCollection(){localStorage.getItem("collectionList")?(this.collectionList=JSON.parse(localStorage.getItem("collectionList")),this.getFilterProducts()):this.collectionList=[]},updateCollection(t){const o=this.collectionList.indexOf(t.id);this.getCollection(),o===-1?this.addToCollection(t.id):this.deleteCollectionItem(o),localStorage.setItem("collectionList",JSON.stringify(this.collectionList)),this.getCollection()},addToCollection(t){this.collectionList.push(t),this.swalShow("已加入收藏","success","toast")},deleteCollectionItem(t){this.collectionList.splice(t,1),this.swalShow("已取消收藏","success","toast")}}});export{L as c};
