import{k as a,m as r,l as s}from"./index-c6ed4168.js";import{s as n}from"./swalMessage-905c8f09.js";import{l as h}from"./cartStore-581dafbd.js";const{VITE_APP_URL:c,VITE_APP_PATH:l}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},e=h(),_=a("products",{state:()=>({products:[],tempProduct:{},page:{},productCategory:{披薩:["蔬食首選","海鮮至上","無肉不歡","甜食主義"],副食:["炸物","飲料"]},filterCategory:"全部商品"}),actions:{...r(n,["swalShow"]),getProducts(){const o=`${c}/api/${l}/products/all`;e.isLoading=!0,s.get(o).then(t=>{this.products=t.data.products,this.page=t.data.pagination,e.isLoading=!1}).catch(t=>{this.swalShow(`${t.message}`,"error"),e.isLoading=!1})},getProduct(o){e.isLoading=!0,this.tempProduct={},s.get(`${c}/api/${l}/product/${o}`).then(t=>{this.tempProduct=t.data.product,e.isLoading=!1}).catch(t=>{this.swalShow(`${t.message}`,"error"),e.isLoading=!1})},changeCategory(o){this.filterCategory=o}},getters:{filterProducts:({products:o,filterCategory:t})=>o.filter(d=>t==="全部商品"?o:d.productCategory===t)}}),{VITE_APP_URL:u,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},m=a("collectionStore",{state:()=>({collectionList:[],collection:{itemID:"",hover:!1},filterProducts:[]}),actions:{...r(n,["swalShow"]),getFilterProducts(){const o=`${u}/api/${g}/products/all`;s.get(o).then(t=>{this.filterProducts=t.data.products.filter(i=>this.collectionList.indexOf(i.id)!==-1)}).catch(t=>{this.swalShow(`${t.message}`,"error")})},getCollection(){localStorage.getItem("collectionList")?(this.collectionList=JSON.parse(localStorage.getItem("collectionList")),this.getFilterProducts()):this.collectionList=[]},updateCollection(o){const t=this.collectionList.indexOf(o.id);this.getCollection(),t===-1?this.addToCollection(o.id):this.deleteCollectionItem(t),localStorage.setItem("collectionList",JSON.stringify(this.collectionList)),this.getCollection()},addToCollection(o){this.collectionList.push(o),this.swalShow("已加入收藏","success","toast")},deleteCollectionItem(o){this.collectionList.splice(o,1),this.swalShow("已取消收藏","success","toast")}}});export{m as c,_ as p};
