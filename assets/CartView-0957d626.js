import{_ as I,R as q,m as y,a as V,r as l,o as s,c as n,b as t,d,w as u,F as g,e as L,h as a,g as w,f as _,t as i,k as $,i as N,H as D}from"./index-56a9654d.js";import{c as k,l as j}from"./cartStore-1a749757.js";import{P as F}from"./ProgressBar-40074924.js";import{F as S}from"./FrontHeading-c2fb6690.js";import"./swalMessage-3d7964fb.js";const T={data(){return{}},components:{ProgressBar:F,FrontHeading:S,RouterLink:q},computed:{...y(k,["cart"]),...y(j,["isLoading","loadingItem"])},methods:{...V(k,["getCart","updateCartItem","deleteCartItem","deleteCart"])},mounted(){this.getCart()}},H={class:"bg_texture3",style:{"min-height":"600px"}},P={class:"container"},R={key:0,class:"d-flex flex-column justify-content-center align-items-center",style:{"margin-top":"100px"}},U=t("div",{class:"text-center my-5 fw-bold text-cusBrown fs-4"},[t("i",{class:"bi bi-cart-x"}),_(" 您的購物車目前是空的喔 ")],-1),M={class:"w-100 text-center"},A=t("button",{type:"button",class:"btn btn-cusDarkBrown text-white w-md-25 w-50"}," 返回購物 ",-1),E={key:1,class:"mt-4 mb-5"},z=$('<div class="row fw-bold text-cusDarkBrown text-center border-bottom py-2" style="background-color:#ffe3ce;"><div class="col-2"></div><div class="col-md-4">商品明細</div><div class="col d-none d-md-block">數量/單位</div><div class="col d-none d-md-block">小計</div></div>',1),G={class:"col-2 col-md-1 order-3 order-md-1"},J=["onClick","disabled"],K=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),O=t("i",{class:"bi bi-trash3"},null,-1),Q=[K,O],W={class:"col-2 col-md-1 order-1 order-md-2"},X=["src","alt"],Y={class:"col-8 col-md-4 order-2 order-md-3"},Z={class:"d-flex flex-column text-nowrap"},tt={class:"col order-4 my-3"},et={class:"input-group input-group-sm"},ot={class:"d-flex justify-content-center flex-nowrap w-100"},st=["disabled","onClick"],nt=t("i",{class:"bi bi-dash"},null,-1),dt=[nt],at=["onUpdate:modelValue","onBlur"],it=["disabled","onClick"],rt=t("i",{class:"bi bi-plus"},null,-1),ct=[rt],lt={class:"col text-end order-5"},ut={class:"row bg-white py-2"},_t={class:"col"},pt=["disabled"],bt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ht={class:"col-md-2 col text-end text-cusDarkBrown fw-bold fs-5"},mt={class:"d-flex justify-content-between"},vt=t("div",null,"總計",-1),ft={key:2,class:"row justify-content-end flex-row gy-3 mb-3"},yt={class:"col-md-2 col-6"},gt=t("button",{type:"button",class:"btn btn-cusDarkBrown text-white w-100"}," 返回購物 ",-1),wt={class:"col-md-2 col-6"},kt=t("button",{type:"button",class:"btn btn btn-primary w-100 text-white"}," 確認送出 ",-1);function xt(o,r,Ct,Bt,It,qt){var p,b,h,m,v;const x=l("ProgressBar"),C=l("FrontHeading"),c=l("RouterLink"),B=l("VueLoading");return s(),n(g,null,[t("div",H,[t("div",P,[d(x,{stage:1,class:"mt-3"}),d(C,{title:"購物車",class:"mt-3"}),((p=o.cart.carts)==null?void 0:p.length)===0?(s(),n("div",R,[U,t("div",M,[d(c,{class:"text-decoration-none text-white",to:"/products"},{default:u(()=>[A]),_:1})])])):(s(),n("div",E,[z,(s(!0),n(g,null,L(o.cart.carts,e=>(s(),n("div",{class:"row justify-content-center bg-white border-bottom align-items-center text-cusDarkBrown text-center py-2",key:e.id},[t("div",G,[t("div",{type:"button",class:"text-center clickBtn",onClick:a(f=>o.deleteCartItem(e),["prevent"]),disabled:o.loadingItem===e.id},Q,8,J)]),t("div",W,[d(c,{to:`/product/${e.product.id}`},{default:u(()=>[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"object-fit-cover",height:"70",width:"70"},null,8,X)]),_:2},1032,["to"])]),t("div",Y,[t("div",Z,[_(i(e.product.title)+" ",1),t("div",null,"NT$ "+i(e.product.price)+" / "+i(e.product.unit),1)])]),t("div",tt,[t("div",et,[t("div",ot,[t("button",{type:"button",class:"btn btn-outline-primary",id:"basic-addon1",disabled:e.qty===1||o.loadingItem===e.id,onClick:a(()=>o.updateCartItem(e,e.qty-1),["prevent"])},dt,8,st),N(t("input",{type:"number",class:"form-control text-center hide-arrows mx-2",min:"1",max:"20","onUpdate:modelValue":f=>e.qty=f,oninput:"if(value<1)value=1; if(value>20) value=20;",onBlur:a(()=>{e.qty<1?e.qty=1:e.qty>20?e.qty=20:o.updateCartItem(e,e.qty)},["prevent"])},null,40,at),[[D,e.qty]]),t("button",{type:"button",class:"btn btn-outline-primary",id:"basic-addon2",disabled:e.qty>=20||o.loadingItem===e.id,onClick:a(()=>o.updateCartItem(e,e.qty+1),["prevent"])},ct,8,it)])])]),t("div",lt,"NT$ "+i(e.total),1)]))),128)),t("div",ut,[t("div",_t,[t("button",{class:"btn btn-outline-danger text-nowrap",type:"button",onClick:r[0]||(r[0]=a(()=>o.deleteCart(),["prevent"])),disabled:o.loadingItem==="deleteCart"||((h=(b=o.cart)==null?void 0:b.carts)==null?void 0:h.length)===0},[o.loadingItem==="deleteCart"?(s(),n("span",bt)):w("",!0),_(" 清空購物車 ")],8,pt)]),t("div",ht,[t("div",mt,[vt,t("div",null,"NT$ "+i(o.cart.total),1)])])])])),(v=(m=o.cart)==null?void 0:m.carts)!=null&&v.length?(s(),n("div",ft,[t("div",yt,[d(c,{class:"text-decoration-none text-white",to:"/products"},{default:u(()=>[gt]),_:1})]),t("div",wt,[d(c,{class:"text-decoration-none text-white",to:"/order"},{default:u(()=>[kt]),_:1})])])):w("",!0)])]),d(B,{active:o.isLoading,"onUpdate:active":r[1]||(r[1]=e=>o.isLoading=e),loader:"dots"},null,8,["active"])],64)}const jt=I(T,[["render",xt]]);export{jt as default};
