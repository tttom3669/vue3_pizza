import{_ as w,m as b,r as d,o as i,c as n,a as t,F as a,f as g,t as o,n as v,i as f,b as c,w as y,e as x}from"./index-15214320.js";import{s as L}from"./swalMessage-e20b45c8.js";import"./sweetalert2.all-4950e7f5.js";const{VITE_APP_URL:u,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{order:{user:{},products:[]},isLoading:!1}},props:["orderId"],methods:{...b(L,["swalShow"]),getOrder(){const l=`${u}/api/${_}/order/${this.orderId}`;this.isLoading=!0,this.$http.get(l).then(e=>{this.isLoading=!1,this.order=e.data.order}).catch(e=>{this.isLoading=!1,this.swalShow(`${e.response.data.message}`,"error")})},payOrder(){const l=`${u}/api/${_}/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(l).then(e=>{this.getOrder(),this.swalShow(`${e.data.message}`,"success","toast")}).catch(e=>{this.swalShow(`${e.response.data.message}`,"error"),this.isLoading=!1})}},mounted(){this.getOrder(),this.swalShow("已建立訂單","success","toast")}},k={class:"container"},P=t("div",{class:"row d-flex justify-content-center mt-3"},[t("div",{class:"col-12 col-md-6"},[t("div",{class:"col"},[t("div",{class:"position-relative m-4"},[t("div",{class:"progress",style:{height:"1px"}},[t("div",{class:"progress-bar",role:"progressbar",style:{width:"50%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),t("div",{class:"position-absolute top-0 start-0 text-white translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}}," 1 "),t("div",{class:"position-absolute top-0 start-50 text-white translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}}," 2 "),t("div",{class:"position-absolute top-0 start-100 text-white translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}}," 3 ")])]),t("div",{class:"col d-flex justify-content-between text-primary fw-bold"},[t("span",{class:"ms-n1"},"確認購買"),t("span",null,"填寫資料"),t("span",{class:"me-n1"},"完成訂單")])])],-1),E={class:"row mt-4 d-flex flex-column flex-lg-row"},T={class:"col-lg-5"},A={class:"card"},I={class:"card-body"},O=t("h5",{class:"card-title"},"訂單明細",-1),S={class:"table align-middle"},B=["src"],C={class:"p-2"},D={class:"text-nowrap"},N={class:"text-nowrap"},j={class:"text-nowrap text-end"},U={class:"row row-cols-2 d-flex justify-content-between"},R=t("div",{class:"col py-2 h5 text-cusDarkBrown fw-bold text-start"}," 總金額 ",-1),z={class:"col py-2 h5 text-cusDarkBrown fw-bold text-end"},F={class:"col-lg-7"},H={class:"card"},M={class:"card-body"},$=t("h5",{class:"card-title"},"訂單資訊",-1),q={key:0,class:"table"},G=t("td",null,"訂單編號",-1),J=t("td",null,"下單時間",-1),K=t("td",null,"Email",-1),Q=t("td",null,"收件人姓名",-1),W=t("td",null,"收件人電話",-1),X=t("td",null,"收件人地址",-1),Y=t("td",null,"付款狀態",-1),Z=t("td",null,"備註",-1),tt={class:"d-flex justify-content-end mt-3"},st={key:1,type:"button",class:"btn btn-primary text-white"};function et(l,e,ot,rt,s,h){const p=d("router-link"),m=d("VueLoading");return i(),n(a,null,[t("div",k,[P,t("div",E,[t("div",T,[t("div",A,[t("div",I,[O,t("table",S,[t("tbody",null,[(i(!0),n(a,null,g(s.order.products,r=>(i(),n("tr",{key:r.id},[t("td",null,[t("img",{src:r.product.imageUrl,alt:"",class:"object-fit-cover",height:"70",width:"70"},null,8,B)]),t("td",C,[t("div",D,o(r.product.title),1)]),t("td",N,"x "+o(r.qty),1),t("td",j," NT$ "+o(l.$filters.currency(r.final_total)),1)]))),128))])]),t("div",U,[R,t("div",z," NT$ "+o(s.order.total),1)])])])]),t("div",F,[t("div",H,[t("div",M,[$,s.order?(i(),n("table",q,[t("tbody",null,[t("tr",null,[G,t("td",null,o(s.order.id),1)]),t("tr",null,[J,t("td",null,o(l.$filters.date(s.order.create_at)),1)]),t("tr",null,[K,t("td",null,o(s.order.user.email),1)]),t("tr",null,[Q,t("td",null,o(s.order.user.name),1)]),t("tr",null,[W,t("td",null,o(s.order.user.address),1)]),t("tr",null,[X,t("td",null,o(s.order.user.tel),1)]),t("tr",null,[Y,t("td",{class:v(["fw-bold",{"text-success":s.order.is_paid,"text-danger":!s.order.is_paid}])},o(s.order.is_paid?"付款完成":"尚未付款"),3)]),t("tr",null,[Z,t("td",null,o(s.order.message),1)])])])):f("",!0)])]),t("div",tt,[s.order.is_paid?(i(),n("button",st,[c(p,{to:"/",class:"text-decoration-none text-white"},{default:y(()=>[x(" 返回首頁 ")]),_:1})])):(i(),n("button",{key:0,type:"button",class:"btn btn-primary text-white",onClick:e[0]||(e[0]=()=>h.payOrder())}," 來去付款 "))])])])]),c(m,{active:s.isLoading,"onUpdate:active":e[1]||(e[1]=r=>s.isLoading=r),loader:"dots"},null,8,["active"])],64)}const dt=w(V,[["render",et]]);export{dt as default};
