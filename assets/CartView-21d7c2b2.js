import{_ as I,R as V,m as f,a as L,r as l,o as s,c as n,b as t,d,w as u,F as g,e as D,h as a,g as w,f as k,t as c,k as F,i as N,H as $}from"./index-fd70f48b.js";import{c as x,l as j}from"./cartStore-03ff67d7.js";import{P as S}from"./ProgressBar-4b34a540.js";import{F as T}from"./FrontHeading-7a22810c.js";import"./swalMessage-6e521104.js";const H={data(){return{lastQty:""}},components:{ProgressBar:S,FrontHeading:T,RouterLink:V},computed:{...f(x,["cart"]),...f(j,["isLoading","loadingItem"])},methods:{...L(x,["getCart","updateCartItem","deleteCartItem","deleteCart"])},mounted(){this.getCart()}},P={class:"bg_texture3",style:{"min-height":"600px"}},R={class:"container"},U={key:0,class:"d-flex flex-column justify-content-center align-items-center",style:{"margin-top":"100px"}},Q=t("div",{class:"text-center my-5 fw-bold text-cusBrown fs-4"},[t("i",{class:"bi bi-cart-x"}),k(" 您的購物車目前是空的喔 ")],-1),M={class:"w-100 text-center"},A=t("button",{type:"button",class:"btn btn-cusDarkBrown text-white w-md-25 w-50"}," 返回購物 ",-1),E={key:1,class:"mt-4 mb-5"},z=F('<div class="row fw-bold text-cusDarkBrown text-center border-bottom py-2" style="background-color:#ffe3ce;"><div class="col-2"></div><div class="col-md-4 text-start text-md-center">商品明細</div><div class="col d-none d-md-block">數量/單位</div><div class="col d-none d-md-block">小計</div></div>',1),G={class:"col-2 col-md-1 order-3 order-md-1"},J=["onClick","disabled"],K=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),O=t("i",{class:"bi bi-trash3"},null,-1),W=[K,O],X={class:"col-3 col-md-1 order-1 order-md-2"},Y=["src","alt"],Z={class:"col-7 col-md-4 order-2 order-md-3"},tt={class:"d-flex flex-column text-nowrap"},et={class:"text-cusDarkBrown fw-bold"},ot={class:"text-cusBrown"},st={class:"col order-4 my-3"},nt={class:"input-group input-group-sm"},dt={class:"d-flex justify-content-center flex-nowrap w-100"},at=["disabled","onClick"],ct=t("i",{class:"bi bi-dash"},null,-1),it=[ct],rt=["onUpdate:modelValue","onFocus","onBlur"],lt=["disabled","onClick"],ut=t("i",{class:"bi bi-plus"},null,-1),_t=[ut],pt={class:"col text-end order-5"},bt={class:"row bg-white py-2"},ht={class:"col"},vt=["disabled"],mt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},yt={class:"col-md-2 col text-end text-cusDarkBrown fw-bold fs-5"},ft={class:"d-flex justify-content-between"},gt=t("div",null,"總計",-1),wt={key:2,class:"row justify-content-end flex-row gy-3 mb-3"},xt={class:"col-md-2 col-6"},kt=t("button",{type:"button",class:"btn btn-cusDarkBrown text-white w-100"}," 返回購物 ",-1),Ct={class:"col-md-2 col-6"},Bt=t("button",{type:"button",class:"btn btn btn-primary w-100 text-white"}," 確認送出 ",-1);function qt(o,i,It,Vt,_,Lt){var p,b,h,v,m;const C=l("ProgressBar"),B=l("FrontHeading"),r=l("RouterLink"),q=l("VueLoading");return s(),n(g,null,[t("div",P,[t("div",R,[d(C,{stage:1,class:"mt-3"}),d(B,{title:"購物車",class:"mt-3"}),((p=o.cart.carts)==null?void 0:p.length)===0?(s(),n("div",U,[Q,t("div",M,[d(r,{class:"text-decoration-none text-white",to:"/products"},{default:u(()=>[A]),_:1})])])):(s(),n("div",E,[z,(s(!0),n(g,null,D(o.cart.carts,e=>(s(),n("div",{class:"row justify-content-center bg-white border-bottom align-items-center text-cusDarkBrown text-center py-2",key:e.id},[t("div",G,[t("div",{type:"button",class:"text-center clickBtn",onClick:a(y=>o.deleteCartItem(e),["prevent"]),disabled:o.loadingItem===e.id},W,8,J)]),t("div",X,[d(r,{to:`/product/${e.product.id}`},{default:u(()=>[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"object-fit-cover",height:"70",width:"70"},null,8,Y)]),_:2},1032,["to"])]),t("div",Z,[t("div",tt,[t("div",et,c(e.product.title),1),t("div",ot," NT$ "+c(e.product.price)+" / "+c(e.product.unit),1)])]),t("div",st,[t("div",nt,[t("div",dt,[t("button",{type:"button",class:"btn btn-outline-primary",id:"basic-addon1",disabled:e.qty===1||o.loadingItem===e.id,onClick:a(()=>o.updateCartItem(e,e.qty-1),["prevent"])},it,8,at),N(t("input",{type:"number",class:"form-control text-center hide-arrows mx-2",min:"1",max:"20","onUpdate:modelValue":y=>e.qty=y,oninput:"if(value<1)value=1; if(value>20) value=20;",onFocus:()=>{_.lastQty=e.qty},onBlur:a(()=>{e.qty<1?e.qty=1:e.qty>20&&(e.qty=20),_.lastQty!==e.qty&&o.updateCartItem(e,e.qty)},["prevent"])},null,40,rt),[[$,e.qty]]),t("button",{type:"button",class:"btn btn-outline-primary",id:"basic-addon2",disabled:e.qty>=20||o.loadingItem===e.id,onClick:a(()=>o.updateCartItem(e,e.qty+1),["prevent"])},_t,8,lt)])])]),t("div",pt,"NT$ "+c(e.total),1)]))),128)),t("div",bt,[t("div",ht,[t("button",{class:"btn btn-outline-danger text-nowrap",type:"button",onClick:i[0]||(i[0]=a(()=>o.deleteCart(),["prevent"])),disabled:o.loadingItem==="deleteCart"||((h=(b=o.cart)==null?void 0:b.carts)==null?void 0:h.length)===0},[o.loadingItem==="deleteCart"?(s(),n("span",mt)):w("",!0),k(" 清空購物車 ")],8,vt)]),t("div",yt,[t("div",ft,[gt,t("div",null,"NT$ "+c(o.cart.total),1)])])])])),(m=(v=o.cart)==null?void 0:v.carts)!=null&&m.length?(s(),n("div",wt,[t("div",xt,[d(r,{class:"text-decoration-none text-white",to:"/products"},{default:u(()=>[kt]),_:1})]),t("div",Ct,[d(r,{class:"text-decoration-none text-white",to:"/order"},{default:u(()=>[Bt]),_:1})])])):w("",!0)])]),d(q,{active:o.isLoading,"onUpdate:active":i[1]||(i[1]=e=>o.isLoading=e),loader:"dots"},null,8,["active"])],64)}const St=I(H,[["render",qt]]);export{St as default};
