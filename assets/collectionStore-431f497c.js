import{k as r,a as n,l as c}from"./index-0db4297d.js";import{s as d}from"./swalMessage-e66eb21b.js";import{l as u}from"./cartStore-c87d481e.js";const{VITE_APP_URL:l,VITE_APP_PATH:a}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},o=u(),_=r("products",{state:()=>({products:[],tempProduct:{},page:{},productCategory:{披薩:["蔬食首選","海鮮至上","無肉不歡","甜食主義"],副食:["炸物","飲料"]},filterCategory:"全部商品",keyWords:""}),actions:{...n(d,["swalShow"]),getProducts(){const e=`${l}/api/${a}/products/all`;o.isLoading=!0,c.get(e).then(t=>{this.products=t.data.products,this.page=t.data.pagination,o.isLoading=!1}).catch(t=>{this.swalShow(`${t.message}`,"error"),o.isLoading=!1})},getProduct(e){o.isLoading=!0,this.tempProduct={},c.get(`${l}/api/${a}/product/${e}`).then(t=>{this.tempProduct=t.data.product,o.isLoading=!1}).catch(t=>{this.swalShow(`${t.message}`,"error"),o.isLoading=!1})},changeCategory(e){this.filterCategory=e},searchItem(e){this.keyWords=e}},getters:{filterProducts:({products:e,filterCategory:t})=>e.filter(s=>t==="全部商品"?e:s.productCategory===t),searchProducts:({products:e,keyWords:t})=>e.filter(s=>(s.productCategory.includes(t)||s.title.includes(t)||s.category.includes(t))&&t!=="")}}),{VITE_APP_URL:h,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/vue3_pizza/",MODE:"production",DEV:!1,PROD:!0},f=r("collectionStore",{state:()=>({collectionList:[],collection:{itemID:"",hover:!1},filterProducts:[]}),actions:{...n(d,["swalShow"]),getFilterProducts(){const e=`${h}/api/${g}/products/all`;c.get(e).then(t=>{this.filterProducts=t.data.products.filter(i=>this.collectionList.indexOf(i.id)!==-1)}).catch(t=>{this.swalShow(`${t.message}`,"error")})},getCollection(){localStorage.getItem("collectionList")?(this.collectionList=JSON.parse(localStorage.getItem("collectionList")),this.getFilterProducts()):this.collectionList=[]},updateCollection(e){const t=this.collectionList.indexOf(e.id);this.getCollection(),t===-1?this.addToCollection(e.id):this.deleteCollectionItem(t),localStorage.setItem("collectionList",JSON.stringify(this.collectionList)),this.getCollection()},addToCollection(e){this.collectionList.push(e),this.swalShow("已加入收藏","success","toast")},deleteCollectionItem(e){this.collectionList.splice(e,1),this.swalShow("已取消收藏","success","toast")}}});export{f as c,_ as p};
